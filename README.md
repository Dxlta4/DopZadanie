# Мониторинг Docker-контейнеров с помощью Grafana и Prometheus

Цель: развернуть полноценный стек мониторинга Docker-контейнеров, включающий тестовое приложение, систему сбора метрик и визуализацию нагрузки в реальном времени.

## Ход работы
## Этап 1: Подготовка файлов  и запуск конфигурации
Создали файлы и запустили контейнер.
<img width="568" height="82" alt="image" src="https://github.com/user-attachments/assets/fdb908f7-0687-4a96-9e3f-ec8b409d44ca" />
<img width="1280" height="268" alt="image" src="https://github.com/user-attachments/assets/ae00e84d-2f18-4e26-b72d-4784ebad255c" />



## Этап 2: Проверка cAdvisor

1. Открыли веб-интерфейс cAdvisor в браузере
2. Убедились, что cAdvisor видит все контейнеры

<img width="889" height="921" alt="image" src="https://github.com/user-attachments/assets/0248e4b1-321f-43cb-9ed9-c86df7cab6ed" />


## Этап 3: Проверка Prometheus

1. Открыли веб-интерфейс Prometheus
2. Перешли в раздел Status → Targets
3. Проверили, что target cAdvisor имеет статус UP
   
<img width="884" height="937" alt="image" src="https://github.com/user-attachments/assets/9eb3d696-24e8-4042-9e35-33e4a0148814" />


4. Выполнили тестовый запрос:
    - Перешли на главную страницу Prometheus
    - В поле запроса ввели метрику `container_cpu_usage_seconds_total`
    - Нажали Execute и убедились, что данные выводятся
<img width="890" height="938" alt="image" src="https://github.com/user-attachments/assets/7911e193-5dd0-43aa-a4c9-985b63952457" />

        
## Этап 5: Подключение Grafana к Prometheus

1. Открыли веб-интерфейс Grafana
2. Добавили новый Data Source (источник данных):
  
<img width="1280" height="656" alt="image" src="https://github.com/user-attachments/assets/c4f90316-8e2d-407a-9bc1-233522d4a52a" />


## Этап 6: Создание простого дашборда для тестирования

1. Создали новый Dashboard
2. Использовали простой PromQL запрос для отображения метрики контейнера
3. Установили временной диапазон на "Last 5 minutes"
<img width="974" height="638" alt="image" src="https://github.com/user-attachments/assets/a2e73ab0-38fa-4160-967d-85038d86540d" />

## Этап 7: Создание нагрузки на контейнер

1. Выполним команду для генерации нагрузки на контейнер webapp
2. Наблюдаем в реальном времени, как метрики изменяются на дашборде Grafana
3. Остановили нагрузку
4. Проанализировали, как быстро метрики вернулись к норме
<img width="676" height="46" alt="image" src="https://github.com/user-attachments/assets/9ef21914-701f-4353-97b2-0a17cc3095ab" />


Метрики вернулись к норме в течении 7 минут.

## Этап 8: Анализ и отчёт
1. Создайте скриншоты дашборда с метриками во время нормальной работы
2. Создайте скриншоты дашборда во время нагрузки
3. Опишите наблюдаемые изменения в метриках

<img width="1345" height="917" alt="image" src="https://github.com/user-attachments/assets/6f207554-fdb9-427d-be9b-69e848646c14" />



<img width="1280" height="326" alt="image" src="https://github.com/user-attachments/assets/8592f981-bd5a-4901-baba-93e9ce4a30f4" />



В нормальном режиме работы контейнер с веб-приложением не оказывал заметной нагрузки на процессор. Значения CPU на графике оставались стабильными и находились вблизи нулевого уровня, без выраженных колебаний, что соответствует корректной работе контейнера при отсутствии активных запросов.

Для проведения нагрузочного тестирования был использован нестандартный метод генерации нагрузки непосредственно внутри контейнера, заключающийся в выполнении бесконечного цикла без операций ввода-вывода, создающего постоянную вычислительную нагрузку на процессор. Данный подход позволил гарантированно задействовать CPU контейнера независимо от характера HTTP-запросов и особенностей работы веб-сервера.

После запуска нагрузки было зафиксировано существенное увеличение потребления процессорного времени, что отразилось на графике в виде плавного роста значений CPU. Нагрузка возрастала постепенно, после чего достигала устойчивого пикового уровня, соответствующего полной загрузке доступных вычислительных ресурсов контейнера. В течение всего периода тестирования значение CPU оставалось стабильным, без резких скачков и аномальных колебаний.
   
Отсутствие значительных флуктуаций нагрузки объясняется характером теста и подтверждает корректную работу контейнера в условиях постоянной вычислительной нагрузки. После прекращения выполнения нагрузочного процесса наблюдалось постепенное снижение значений CPU и возврат метрик к исходному уровню, что свидетельствует об отсутствии утечек ресурсов и корректном завершении нагрузки.
 
---
## Вывод 

  В ходе выполнения работы были рассмотрены и освоены инструменты мониторинга Docker-контейнеров на базе cAdvisor, Prometheus и Grafana. Все требуемые сервисы были корректно развернуты и сконфигурированы, что позволило организовать сбор и визуализацию основных метрик функционирования контейнеров. В процессе проведения нагрузочного тестирования была зафиксирована адекватная реакция системы мониторинга: показатели загрузки процессора существенно возрастали под нагрузкой и после её завершения возвращались к исходным значениям. Полученные результаты подтверждают корректность настройки мониторинга и демонстрируют эффективность выбранных инструментов для наблюдения за состоянием контейнеризированных приложений в режиме реального времени.
